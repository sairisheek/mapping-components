<apex:page sidebar="false" controller="breadwinner_qbo.BreadwinnerController"  tabStyle="Breadwinner__tab" action="{!initializeApp}" title="Breadwinner Home">
    <apex:form >
        <html xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <head>
                <apex:stylesheet value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/SLDS/assets/styles/salesforce-lightning-design-system-vf.min.css')}" />
                
                <script src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/JS/jquery-1.11.3.js')}"></script>
                <apex:includeScript value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/JS/jsapi.js')}" />
                    
                    <script type="text/javascript">
                        var clicky_custom = clicky_custom || {};
                        clicky_custom.href = '/breadwinner-app/',
                        clicky_custom.title = 'Breadwinner App for {!$Organization.Id}',
                        clicky_custom.timer = 500;
                        clicky_custom.timeout = 10;
                        clicky_custom.cookies_disable = 0;
                        clicky_custom.queue_disable = 0;
                        clicky_custom.sticky_data_disable = 0;
                        clicky_custom.outbound_disable = 1;
                        clicky_custom.video_disable = 1;
                        clicky_custom.history_disable = 0;
                        clicky_custom.ping_disable = 1;
                        clicky_custom.pageview_disable = 0;
                        clicky_custom.osa_disable = 1;
                        clicky_custom.heatmap_disable = 1;
                        clicky_custom.visitor = {
                            lmo: "true",
                            org_id: "{!$Organization.Id}",
                            DaddyAnalytics: (new Date()).getTime() + "-" +(Math.floor(Math.random() * (9999999 - 1000000) )+ 1000000)
                        };
                </script>
                <script src="//hello.staticstuff.net/w/__stats.js" type="text/javascript"></script>
                <script type="text/javascript">
                    try{
                        if({!NOT(isConnectedWithQBO)}){
                            clicky.init(100547279);
                            console.log('sent');
                        } 
                    }
                catch(e){console.log(e);}
                </script>            
                <script>
                
                var j$ = jQuery.noConflict();
                j$(document).ready(function(){
                    console.log('script loaded');
                    //onTabEnterPushToInteractionLog('Breadwinner Home');
                    //checkSetupTabStepsCompletedFunc();
                    onTabEnterPushToInteractionLog('Setup');
                    createRemoteSiteMetadata();
                    checkIfLayoutIsUpdated();
                });
                
                function selectTab(elmnt) {
                    j$("#Breadwinner-Left-Menu ul").children(".slds-is-active").removeClass("slds-is-active");
                    j$(elmnt).parent("li").addClass("slds-is-active");
                    
                    j$("#breadwinner-right-content div.slds-show").addClass("slds-hide");
                    j$("#breadwinner-right-content div.slds-show").removeClass("slds-show");
                    
                    j$("#breadwinner-right-content").children("div[aria-labelledby='"+elmnt.id+"']").addClass("slds-show");
                    
                }
                
                function showHideNestedMenu(elmnt){
                    j$(elmnt).parent("li").children("ul").toggle();
                    j$(elmnt).parent("li").toggleClass("slds-section slds-is-open");
                }
                
                function HandleSearch(){
                    var findword=j$("#MenuSearchBox").val().toLowerCase();
                    j$( "#Breadwinner-Left-Menu ul li" ).hide();
                    var checkOpenedInnerTab=j$("li.slds-list__item.slds-section.slds-is-open.slds-is-active").length;
                    
                    if(findword.length > 0){
                        
                        j$( "h2.slds-text-title--caps" ).css( "display", "none" );
                        
                        j$( "#Breadwinner-Left-Menu ul li a" ).each(function( index ) {
                            var textreturned=j$( this ).text().toLowerCase()
                            //console.log(textreturned);
                            if(textreturned.indexOf(findword)>-1){
                                j$( this ).parents("li,ul").show();
                                j$( this ).parents("li").addClass("slds-section slds-is-open");
                                //console.log($( this ).parents());
                                
                            }
                            else{
                                j$( this ).parent("li,ul").hide();
                                if(checkOpenedInnerTab==0){
                                    j$( this ).parents("li").removeClass("slds-section slds-is-open");
                                }
                            }
                        });
                        
                    }
                    else{
                        j$( "#Breadwinner-Left-Menu ul li" ).show();
                        
                        if(checkOpenedInnerTab==0){
                            j$("#Breadwinner-Left-Menu").find("li.slds-section.slds-is-open ul").hide();
                            j$("#Breadwinner-Left-Menu").find("li.slds-section.slds-is-open").removeClass("slds-section slds-is-open");
                        }
                        j$( "h2.slds-text-title--caps" ).css( "display", "initial" );
                    }
                    
                }
                function  OpenContactSupportTab(){
                    var SupportTabId="ContactSupport";
                    selectTab(document.getElementById(SupportTabId)); 
                    loadIframesfun('ContactSupportIframeDivId','{!breadwinnerSupportPortalURL}/customer/portal/emails/new?t=711718{!contactSupportPrameters}');
                }

                </script>
                <script type="text/javascript">
                
                var j$ = jQuery.noConflict();
                function HideStyleSheet(){
                    j$("link.user[href$='elements.css']").each(function(){
                        j$(this).removeAttr("href");
                    });
                }
                function message()
                {
                    j$(".infoM6, .infoM4, .infoM3, .infoM2, .infoS1").addClass("slds-notify slds-notify--alert slds-theme--inverse-text  slds-text-align--left slds-text-heading--small slds-m-bottom--small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px"} );
                    j$(".errorM6, .errorM4, .errorM3, .errorM2, .errorS1").addClass("slds-notify slds-notify--alert slds-theme--error  slds-text-align--left slds-text-heading--small slds-m-bottom--small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px"} );
                    j$(".warningM6, .warningM4, .warningM3, .warningM2, .warningS1").addClass("slds-notify slds-notify--alert slds-theme--warning  slds-text-align--left slds-text-heading--small slds-m-bottom--small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px"} ) ;
                    j$(".confirmM6, .confirmM4, .confirmM3, .confirmM2, .confirmS1").addClass("slds-notify slds-notify--alert slds-theme--success slds-text-align--left slds-text-heading--small slds-m-bottom--small").css( {"font-weight":"500","line-height":"1.4","word-spacing":"1px"} ) ;               
                    
                    j$("div .messageText h4").css( {"color": "white","padding-right" : "2px"});
                    j$("div[class*='warning'] div.messageText h4").css( "color", "black" );
                    j$("table.messageTable td").css({"color" : "white"});
                    j$("div[class*='warning'] table.messageTable td").css( "color", "black" );                    
                }
                
                function addallfuncs(){
                    HideStyleSheet();
                    message();
                }
                j$(function(){
                    addallfuncs();
                });
                function connectWithQBO(id)
                {
                     var e = document.getElementById(id);               
                    if(e.style.display== 'none')
                      e.style.display= 'block';
                      else
                      e.style.display= 'none';
                }
    
                // To load iframe onclick to reduce
                function loadIframesfun(iframeSectionId,iframeURL){
                    
                    // to clear div before we insert iframe
                    j$("#"+iframeSectionId).empty();
                    
                    // to create iframe element
                    if(iframeURL.length>0){
                        var para = document.createElement("iframe");
                        para.setAttribute("src", iframeURL);
                        para.setAttribute("height","800px");
                        para.setAttribute("width","100%");
                        
                        // injecting iframe to refereced div
                        document.getElementById(iframeSectionId).appendChild(para);
                    }
                }

                function refreshStatusLogs(){
                    j$("#table_div").empty();
                    j$("#message").empty();
                }
                
                function ShowDifferences(){
                    j$("#DifferenceSection").show();
                    j$("body.sfdcBody").css({"overflow" : "hidden"});
                }
                </script>
                <style>
                    
                    .progress-bar {
                    background-color: aliceblue;
                    height: 25px;
                    padding: 3px;
                    width: 80%;
                    margin: 5px ;         
                    border-radius: 5px;
                    box-shadow: 0 1px 5px #000 inset, 0 1px 0 #444;           
                    }
                    
                    .progress-bar span {
                    background-color: dodgerblue;   
                    display: inline-block;
                    height: 100%;
                    border-radius: 3px;
                    box-shadow: 0 1px 0 rgba(255, 255, 255, .5) inset;
                    transition: width .4s ease-in-out;    
                    }
                    .slds-text-heading--medium{ padding:5px; }
                    .BreadwinnerLightning a {
                    text-decoration: underline;
                    }
                    .message {
                    background-color: inherit;
                    border-style: none;
                    padding:initial;
                    }
                    .msgIcon{
                    display:none;
                    }
                    .message .messageText {
                    margin: 0px;
                    }
                    .BreadwinnerLightning .slds-table .messageTable td {
                     padding: 1px;
                     border-top: 0px;!important; 
                     }
                    .message .messageText h4 {
                    font-weight: inherit;
                    display: initial;
                    }
                    .slds-table td img {
                    max-width: initial;
                    height:initial;
                    }
                    .BreadwinnerLightning .slds-table td{
                        white-space: normal;
                    }
                    
                    table.google-visualization-table-table td:nth-child(4) {
                        word-break: break-word;
                    }
                    table.google-visualization-table-table td:nth-child(5) {
                        white-space: nowrap; 
                    }
                    html body.sfdcBody {
                        padding-top: 0px;
                    }
                    .BreadwinnerLightning .slds-spinner_container{
                        position: fixed;
                        z-index: 9999;
                    }
                    iframe {
                        border: 0px;
                    }
                    .BredwinnerHomeClass .BreadwinnerLightning .slds-text-align--left{
                        text-align:center;
                    }
                    table.bhometable td{
                        padding-bottom: 5px;
                    }
                    
                    .BreadwinnerLightning .readOnlyMode .slds-checkbox--toggle .slds-checkbox--faux{
                        width: 7.3rem;
                        background-color: #30A256;
                    }
                    .BreadwinnerLightning .readOnlyMode .slds-checkbox--toggle .slds-checkbox--faux:focus, .BreadwinnerLightning .readOnlyMode .slds-checkbox--toggle .slds-checkbox--faux:hover{
                        background-color: darkgreen;
                    }

                    .BreadwinnerLightning .readOnlyMode .slds-checkbox--toggle .slds-checkbox--faux:before{
                        position: absolute;
                        transform: rotate(0deg);
                        border-left: 2px;
                        border-right: 0px;
                        border-bottom: 0px;
                        bottom: 3px;
                        right: 0rem;
                        width: 5.6rem;
                        border-radius: 0;
                        background-color: transparent;
                        content: 'Read Only Mode';
                        color: white;
                    }
                    .BreadwinnerLightning .readOnlyMode .slds-checkbox--toggle [type=checkbox]:checked+.slds-checkbox--faux:after, 
                    .BreadwinnerLightning .readOnlyMode .slds-checkbox--toggle [type=checkbox]:checked+.slds-checkbox--faux_container .slds-checkbox--faux:after, 
                    .BreadwinnerLightning .readOnlyMode .slds-checkbox--toggle [type=checkbox]:checked~.slds-checkbox--faux:after{
                        position: absolute;
                        transform: rotate(0deg);
                        border-left: 2px;
                        border-bottom: 0px;
                        border-right: 0px;
                        left: .6rem;
                        width: 6rem;
                        border-radius: 0;
                        background-color: transparent;
                        content: 'Active Mode';
                        color: white;
                    }
                    
                </style>
            </head>
            <body>
                <div class="BreadwinnerLightning">
                    <apex:pageMessages id="pgmsgtag"></apex:pageMessages>
                    <apex:actionStatus id="assign-action-status" layout="block">
                        <apex:facet name="start">
                            <div class="slds-spinner_container">
                                <div class="slds-spinner--brand slds-spinner slds-spinner--medium" role="alert">
                                    <span class="slds-assistive-text">Loading</span>
                                    <div class="slds-spinner__dot-a"></div>
                                    <div class="slds-spinner__dot-b"></div>
                                </div>
                            </div>
                        </apex:facet>
                    </apex:actionStatus>
                    <div class="slds-grid slds-wrap">
                        <div class="slds-p-horizontal--x-small slds-size--1-of-1 slds-medium-size--1-of-6 slds-large-size--2-of-12" style="border-right: 1px solid gray;" >
                            <div class="slds-m-top--medium">
                                <img src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/Images/BreadwinnerLogo.png')}" alt="Breadwinner Logo" />
                            </div>
                            <hr style="margin: 0.5rem 0;border-top-color: gray;"/>
                            <!-- div class="slds-form-element slds-m-bottom--medium slds-m-top--medium">
                                <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon--left">
                                    <svg aria-hidden="true" class="slds-input__icon slds-icon-text-default">
                                        <use xlink:href="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/SLDS/assets/icons/utility-sprite/svg/symbols.svg#search')}"></use>
                                    </svg>
                                    <input id="MenuSearchBox" class="slds-input" onkeyup="HandleSearch();" type="text" placeholder="Quick Find" autocomplete="off" />
                                </div>
                            </div -->
                            <div id="Breadwinner-Left-Menu" class="slds-grid slds-grid--vertical slds-navigation-list--vertical">
                                <!-- ----
<ul>
<li class="slds-is-active"><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('BreadwinnerHome');" style="padding-left: 11px;font-size: 0.85rem;" class="slds-truncate slds-navigation-list--vertical__action slds-text-link--reset" id="BreadwinnerHome" title="Breadwinner Home" >Breadwinner Home</a></li>
</ul>
-- - -->
                                <h2 class="slds-text-title--caps slds-p-around--medium" id="SETUPANDCONFIG">SETUP AND CONFIG</h2>
                                <ul>
                                    <li class="slds-is-active"><a href="javascript:void(0);" onclick="selectTab(this); checkSetupTabStepsCompletedFunc(); onTabEnterPushToInteractionLog('Setup');" class="slds-truncate slds-navigation-list--vertical__action slds-text-link--reset" id="Setup"  title="Setup" >Setup</a></li>
                                    <li ><a href="javascript:void(0);" onclick="loadIframesfun('InvoiceConfigIframeDivId','{!$Page.OptionalSettings}');selectTab(this);onTabEnterPushToInteractionLog('Invoice Configuration');" class="slds-truncate slds-navigation-list--vertical__action slds-text-link--reset" id="InvoiceConfiguration"  title="Invoice Configuration" >Invoice Configuration</a></li>
                                </ul>
                                <apex:outputPanel rendered="{!isChargentInstalled}">
                                    <ul>
                                        <li ><a href="javascript:void(0);" onclick="loadIframesfun('ChargentIframeDivId','{!$Page.TransactionSyncSetup}');selectTab(this);onTabEnterPushToInteractionLog('Chargent');" class="slds-truncate slds-navigation-list--vertical__action slds-text-link--reset" id="Chargent"  title="Chargent Settings" >Chargent Settings</a></li> 
                                    </ul>
                                </apex:outputPanel>
                                <h2 class="slds-text-title--caps slds-p-around--medium" id="LEARN">LEARN</h2>
                                <ul>
                                    <!-- ----
<li><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('University');" class="slds-navigation-list--vertical__action slds-text-link--reset" id="University" title="University" >University</a></li>
-- -->
                                    <li><a href="javascript:void(0);" onclick="loadIframesfun('KnowledgeBaseIframeDivId','{!breadwinnerSupportPortalURL}/?t=711658');selectTab(this);onTabEnterPushToInteractionLog('KnowledgeBase');" class="slds-truncate slds-navigation-list--vertical__action slds-text-link--reset" id="KnowledgeBase" title="Knowledge Base" >Knowledge Base</a></li>
                                    <li><a href="javascript:void(0);" onclick="loadIframesfun('ContactSupportIframeDivId','{!breadwinnerSupportPortalURL}/customer/portal/emails/new?t=711718{!contactSupportPrameters}');selectTab(this);onTabEnterPushToInteractionLog('Support');" class="slds-truncate slds-navigation-list--vertical__action slds-text-link--reset" id="ContactSupport" title="Contact Support">Contact Support</a></li>
                                </ul>
                                <h2 class="slds-text-title--caps slds-p-around--medium" id="ADMIN">ADMIN</h2>
                                <ul>
                                    <li><a href="javascript:void(0);" onclick="selectTab(this);onTabEnterPushToInteractionLog('Billing');" class="slds-truncate slds-navigation-list--vertical__action slds-text-link--reset" id="Billing" title="Billing" >Billing</a></li>
                                    <li ><a href="javascript:void(0);" style="padding-left: 0px;" onclick="showHideNestedMenu(this);" class="slds-truncate slds-navigation-list--vertical__action slds-text-link--reset" id="Troubleshoot" title="Troubleshoot">
                                        <svg aria-hidden="true" class="slds-section__title-action-icon slds-button__icon slds-button__icon--left">
                                            <use xlink:href="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/SLDS/assets/icons/utility-sprite/svg/symbols.svg#switch')}"></use>
                                        </svg>
                                        Troubleshoot
                                        </a>
                                        <ul class="slds-list--vertical slds-has-block-links slds-is-nested slds-hide">
                                            <li class="slds-list__item"><a href="javascript:void(0);" onclick="loadIframesfun('TroubleshootIframeDivId','{!$Page.TroubleshootingPage}');selectTab(this);onTabEnterPushToInteractionLog('Troubleshooting');" class="slds-truncate slds-navigation-list--vertical__action slds-text-link--reset" id="Troubleshooting" title="Troubleshooting" >Troubleshooting</a></li>
                                            <li class="slds-list__item"><a href="javascript:void(0);" onclick="refreshStatusLogs();selectTab(this);onTabEnterPushToInteractionLog('Status Log');" class="slds-truncate slds-navigation-list--vertical__action slds-text-link--reset" id="StatusLogs" title="Status Logs">Status Logs</a></li>
                                        </ul>
                                    </li>
                                </ul>
                                <apex:outputPanel rendered="{!AppConfigList.size>0}">
                                    <ul>
                                        <li ><a href="javascript:void(0);" onclick="loadBreawinnerHomePage();selectTab(this);onTabEnterPushToInteractionLog('BreadwinnerHome');" style="color: #f3f3f3;" class="slds-truncate slds-navigation-list--vertical__action slds-text-link--reset" id="BreadwinnerHome" title="Home (Beta)" >Home (Beta)</a></li>
                                    </ul>
                                </apex:outputPanel>
                            </div>
                        </div>
                        <div class="slds-size--1-of-1 slds-medium-size--5-of-6 slds-large-size--10-of-12" style="border-left: 1px solid gray;">
                            <div id="breadwinner-right-content">
                                <div id="BreadwinnerHome-TAB" class="slds-hide" aria-labelledby="BreadwinnerHome">
                                    <!-- -----------------------------BreadwinnerHome Tab header start ---------------------------->
                                    <div class="slds-page-header" role="banner">
                                        <div class="slds-media">
                                            <div class="slds-media__figure">
                                                <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                    <use xlink:href="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/SLDS/assets/icons/utility-sprite/svg/symbols.svg#home')}"></use>
                                                </svg>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="Welcome to Breadwinner (Beta)">Welcome to Breadwinner (Beta)</p>
                                                <p class="slds-text-body--small">Breadwinner • QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------BreadwinnerHome Tab header END ---------------------------->
                                    <div class="BredwinnerHomeClass slds-m-horizontal--x-small slds-m-top--medium">
                                        <apex:actionFunction name="loadBreawinnerHomePage" action="{!loadBreadwinnerHomeSection}" reRender="BreadwinnerHomeWholePanel" oncomplete="addallfuncs();" />
                                        <apex:outputPanel id="BreadwinnerHomeWholePanel">
                                            <apex:pagemessage summary="You have an active, valid subscription to Breadwinner." severity="CONFIRM" strength="3"  rendered="{!IF(orgStatus =='subscribed', true, false)}"/>
                                            <apex:pagemessage summary="Your fully-featured free trial has been activated." severity="CONFIRM" strength="3"  rendered="{!IF(orgStatus =='trial', true, false)}"/>
                                            <apex:pagemessage summary="Your trial/subscription has expired." severity="ERROR" strength="3"  rendered="{!IF(orgStatus =='expired', true, false)}"></apex:pagemessage>
                                            
                                            <apex:outputPanel layout="block" styleClass="warningM3" style="border-radius:4px;color: black;" rendered="{!isOrgOutOfSync}">
                                                Breadwinner is not able to sync your QuickBooks Online data, there could be some validations or triggers on your Account or Opportunity which are causing the issue, please check for errors in Status Log Section, or 
                                                please&nbsp;<apex:commandLink style="color:black;" action="{!restartHistoricalTotalSync}" status="assign-action-status" oncomplete="alert('Breadwinner Sync is successfully restarted!');">click here to restart Sync</apex:commandLink>.
                                            </apex:outputPanel>
                                            
                                            <!-- need to add permision set info in future -->
                                            
                                            <!-- need to add Duplicate Invoices info in future -->
                                            
                                            <!-- need to add Breadwinner Jobs info in future -->
                                            
                                            <apex:outputPanel layout="block" styleClass="warningM3" style="border-radius:4px;" rendered="{!isOAuthIssue}">
                                                Please Reconnect to 
                                                <apex:variable value="{!0}" var="count">
                                                <apex:repeat value="{!AppConfigList}" var="apc">
                                                    
                                                    <apex:outputPanel rendered="{!apc.needToReconnect}">
                                                        <apex:variable value="{!count+1}" var="count"/>
                                                        {!IF(count>1,',','')}{!apc.Connecting_App_Name}</apex:outputPanel>
                                                </apex:repeat>
                                                    {!IF(count>1,'Orgs','Org')} from Setup.
                                                </apex:variable>
                                            </apex:outputPanel>
                                            <!-- apex:outputPanel layout="block" styleClass="warningM3" style="border-radius:4px;" rendered="{!!isScheduledJobsRunningUnderActiveUser}">
                                                Breadwinner Jobs are running under Inactive user. Please click <a href="javascript:void(0);" style="color:black" onclick="restartJobsUnderActiveUser();">here</a> to restart.
                                                <apex:actionFunction name="restartJobsUnderActiveUser" status="assign-action-status" action="{!runScheduledJobsUnderActiveUser}" rerender="BreadwinnerHomeWholePanel" oncomplete="addallfuncs();"/>
                                            </apex:outputPanel -->
                                            <apex:pagemessage summary="There are {!UnmatchedQBOCompaniesCount} QuickBooks Online Customers that are not associated with Salesforce Accounts. Please associate them from Setup." severity="warning" strength="3" rendered="{!AND(UnmatchedQBOCompaniesCount>0,isAccountSyncDone)}" ></apex:pagemessage>
                                            <apex:pagemessage summary="It looks like there are a few duplicate Invoices created in Salesforce with Invoice numbers, {!duplicateInvoicesString}. Please review them and delete or contact support." severity="warning" strength="3" rendered="{!duplicateInvoicesString!=null}" ></apex:pagemessage>
                                           
                                            <div class="slds-grid slds-wrap">
                                            <apex:variable value="{!0}" var="OrgsCount">
                                            <apex:repeat value="{!AppConfigList}" var="apc">
                                            <div class="slds-box slds-m-top--small slds-m-horizontal--x-small">
                                                <h3 class="slds-section__title">{!apc.Connecting_App_Name}</h3>
                                                <table class="slds-m-top--small bhometable">
                                                    <tr>
                                                        <!-- <apex:outputtext value=" {!apc.Customer_Last_Sync_DateTime}"/> Please Don't remove space in value of outputtext, trick used to show dates in user timezone --> 
                                                        <td class="slds-text-color--weak" >Customers last synced on:</td><td>&nbsp;<apex:outputtext value=" {!apc.Customer_Last_Sync_DateTime}"/></td>
                                                    </tr>
                                                     <tr>
                                                        <td class="slds-text-color--weak">Invoices last synced on:</td><td>&nbsp;<apex:outputtext value=" {!apc.Last_Sync_DateTime}"/></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="slds-text-color--weak">Sales Receipts last synced on:</td><td>&nbsp;<apex:outputtext value=" {!apc.Sales_Receipt_Last_Sync_DateTime}"/></td>
                                                    </tr>
                                                    <tr>
                                                        <td class="slds-text-color--weak">Refund Receipts last synced on:</td><td>&nbsp;<apex:outputtext value=" {!apc.Refund_Receipt_Last_Sync_DateTime}"/></td>
                                                    </tr>                                                   
                                                    <tr>
                                                        <td class="slds-text-color--weak">Payments last synced on:</td><td>&nbsp;<apex:outputtext value=" {!apc.Payment_Last_Sync_DateTime}"/></td>
                                                    </tr>
                                                </table>
                                            </div>
                                                <apex:variable value="{!OrgsCount+1}" var="OrgsCount"/>
                                            </apex:repeat>
                                            </apex:variable>
                                            
                                        </div>
                                        
                                        </apex:outputPanel>
                                    </div>
                                    
                                    
                                </div>
                                
                                <div id="SetupAndConfig-TAB1" class="slds-show" aria-labelledby="Setup">
                                    <!-- -----------------------------BreadwinnerHome Tab header start ---------------------------->
                                    <div class="slds-page-header slds-m-bottom--medium" role="banner">
                                        <div class="slds-media">
                                            <div class="slds-media__figure">
                                                <span class="slds-icon_container slds-icon-custom-custom3" title="Setup">
                                                    <svg aria-hidden="true" class="slds-icon">
                                                        <use xlink:href="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/SLDS/assets/icons/custom-sprite/svg/symbols.svg#custom3')}"></use>
                                                    </svg>
                                                </span>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="Breadwinner Setup">Setup</p>
                                                <p class="slds-text-body--small">Breadwinner • QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------BreadwinnerHome Tab header END ---------------------------->
                                   <div id="SetupDivId">
                                    <div class="slds-m-left--small">
                                        <apex:outputPanel layout="block" styleClass="warningM3" style="border-radius:4px;color: black;" rendered="{!(orgStatus =='expired')}" > 
                                            Your trial/subscription has expired. Please contact sales@breadwinner.com<span style="display:{!IF(OR(isDeveloperOrg,isSandbox),'none','inline')}">, or <a style="color:black;" href="{!breadwinnerPaymentPageURL}" target="_blank">click here to Subscribe</a>.</span>
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" styleClass="warningM3" style="border-radius:4px;color: black;" rendered="{!isOrgOutOfSync}">
                                            Breadwinner is not able to sync your QuickBooks Online data, there could be some validations or triggers on your Account or Opportunity which are causing the issue, please check for errors in Status Log Section, or 
                                            please&nbsp;<apex:commandLink style="color:black;" action="{!restartHistoricalTotalSync}" status="assign-action-status" oncomplete="alert('Breadwinner Sync is successfully restarted!');">click here to restart Sync</apex:commandLink>.
                                        </apex:outputPanel>
                                        <apex:pagemessage summary="You must be a Salesforce System Administrator to modify setup information." severity="WARNING" rendered="{!!isAdministrator}"/>
                                    </div>
                                    
                                    <!---------------------------------- Differece between read only and active mode starts---------------->
                                    <script>
                                      j$('#SetupDivId').click (function (e) {
                                         if((j$(e.target).is('#DifferenceSection') ) ||  (j$(e.target).is('#LinkId') )){
                                             if( j$('#DifferenceSection').css('display') != 'none' ){
                                                 j$('#DifferenceSection').hide();
                                                 j$("body.sfdcBody").css({"overflow" : ""});
                                             }
                                                                                                
                                         }
                                     });
                                    </script>
                                    <div id="DifferenceSection" class="slds-spinner_container slds-wrapper"  align="center" style="display:none;height:100%;overflow:auto" onclick="">
                                                <div style="background-color:white; color:black; margin:5%;max-width:900px;" class="slds-box">
                                                    
                                                    <div class="slds-page-header" align="center">
                                                        <h1 class="slds-text-heading--medium" style="font-weight:none"><b>What’s the difference between Read Only and Active Mode?</b></h1>
                                                    </div>
                                                    <p style="padding:2%" align="left">
                                                        In Read Only Mode, no matter what you do with Breadwinner, nothing will change in QuickBooks Online. Breadwinner reads from QuickBooks Online and updates back to Salesforce, but Breadwinner does not edit, create, or delete anything in QuickBooks Online.
                                                    </p>
                                                    <table class="slds-table slds-table--bordered slds-table--col-bordered">
                                                        <thead class="slds-text-title--caps">
                                                            <tr scope="col">
                                                                <th></th>
                                                                <th><b>Read Only Mode</b></th>
                                                                <th><b>Active Mode</b></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td><b>Clicking “New Invoice” in Breadwinner</b></td>
                                                                <td>No Invoice will be created in QuickBooks Online.</td>
                                                                <td>After confirming data to be created, Invoice created in QuickBooks Online.</td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Clicking “Create a new QuickBooks Online Customer”</b></td>
                                                                <td>No Customer will be created in QuickBooks Online.</td>
                                                                <td>After confirming data, new Customer created in QuickBooks Online.</td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Clicking “Edit QuickBooks Online Company”</b></td>
                                                                <td>The QuickBooks Online Customer will not be edited.</td>
                                                                <td>The QuickBooks Online Customer will be edited.</td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Adding or Editing an Invoice directly in QuickBooks Online</b></td>
                                                                <td>That Invoice will be replicated over to Salesforce/Breadwinner within the hour.</td>
                                                                <td>That Invoice will be replicated over to Salesforce/Breadwinner within the hour.</td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Adding a QuickBooks Online Customer directly in Xero.</b></td>
                                                                <td>Breadwinner will attempt to match the new QuickBooks Online Customer to a Salesforce Account, but if Breadwinner cannot match one, it will create a new Salesforce Account.</td>
                                                                <td>Breadwinner will attempt to match the new QuickBooks Online Customer to a Salesforce Account, but if Breadwinner cannot match one, it will create a new Salesforce Account.</td>
                                                            </tr>
                                                            <tr>
                                                                <td><b>Editing a QuickBooks Online Customer directly in QuickBooks Online</b></td>
                                                                <td>Breadwinner updates the QuickBooks Online Customer record in Breadwinner within the hour, but no changes will be made to the Salesforce Account.</td>
                                                                <td>Breadwinner updates the QuickBooks Online Customer record in Breadwinner within the hour, but no changes will be made to the Salesforce Account.</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <div>
                                                        <h1 align="center" class="slds-text-heading--medium" style="padding-top:1%;padding-bottom:1%">
                                                            <b>Things Breadwinner will Never Do in Either Mode</b>
                                                        </h1>
                                                        <p align="left">
                                                            <span class="slds-text-heading--small">Breadwinner, for financial security and data integrity, will never:</span><br/>
                                                            Create or Edit Credit Memos or Refund Receipts<br/>
                                                            Edit an existing Invoice or Sales Receipt once created.<br/>
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>                                            
                                            <!----Difference between read only and active mode ends-->
                                    
                                    <div >
                                       
                                        <table class="slds-m-top--xx-large slds-m-horizontal--x-small slds-table slds-table--bordered slds-max-medium-table--stacked slds-no-row-hover" cellpadding="0" cellspacing="0" border="0">
                                            <tr>
                                                <td colspan="3" class="slds-m-top--xx-large slds-text-heading--medium"  style="border-top-color:white;">
                                                    <div >
                                                        <apex:outputPanel id="progressPanel">
                                                            
                                                            <apex:outputPanel >
                                                                <apex:outputPanel rendered="{!NOT(isConnectedWithQBO)}">
                                                                    <div display="block" > Congratulations! You are 20% complete! </div>
                                                                    <div class="progress-bar">
                                                                        <span  style="width: 20%"></span> 
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{!AND(isConnectedWithQBO,NOT(isAccountSyncDone),NOT(isLayoutUpdated))}">
                                                                    <div display="block" > Congratulations! You are 40% complete! </div>
                                                                    <div class="progress-bar">
                                                                        <span  style="width: 40%"></span>
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{!AND(isConnectedWithQBO, OR(AND(isAccountSyncDone, NOT(OR(AND(unableToAddRemoteSiteSetting,bwSetting.breadwinner_qbo__Page_Layouts_Updated__c),isLayoutUpdated))),AND(!isAccountSyncDone,OR(AND(unableToAddRemoteSiteSetting,bwSetting.breadwinner_qbo__Page_Layouts_Updated__c),isLayoutUpdated))))}">
                                                                    <div display="block" > Congratulations! You are 60% complete!</div> 
                                                                    <div class="progress-bar">
                                                                        <span  style="width: 60%"></span> 
                                                                    </div>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{!AND(isConnectedWithQBO,isAccountSyncDone,isHistoricalInvoiceSyncStarted,OR(AND(unableToAddRemoteSiteSetting,bwSetting.breadwinner_qbo__Page_Layouts_Updated__c),isLayoutUpdated), (orgStatus !='subscribed') && NOT(isSandbox || isDeveloperOrg))}">
                                                                    <div display="block" > Congratulations! You are 80% complete! </div>
                                                                    <div class="progress-bar">
                                                                        <span  style="width: 80%"></span> 
                                                                    </div>
                                                                </apex:outputPanel>
                                                                
                                                                <apex:outputPanel rendered="{!AND(isConnectedWithQBO,isAccountSyncDone,OR(AND(unableToAddRemoteSiteSetting,bwSetting.breadwinner_qbo__Page_Layouts_Updated__c),isLayoutUpdated),(orgStatus =='subscribed' || isSandbox || isDeveloperOrg))}">

                                                                    <div display="block" > Congratulations! You are 100% complete! </div> 
                                                                    <div class="progress-bar">
                                                                        <span  style="width: 100%"></span> 
                                                                    </div>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                    <br/>
                                                </td>
                                            </tr>
                                            <apex:actionfunction action="{!updateReadOnlyMode}" name="updateReadOnlyMode" status="assign-action-status" reRender="ReadOnlyModeSection,test"/>
                                            <tr>
                                                <td>
                                                <div class="slds-text-heading--medium">
                                                        <apex:outputtext value="Breadwinner is currently in {!if(isActiveMode,'Active Mode','Read Only Mode')}" id="test">
                                                        </apex:outputtext>
                                                </div>
                                                </td>
                                                <td> 
                                                <apex:outputpanel id="ReadOnlyModeSection" layout="block" style="margin-left: -5.4rem;">
                                                    <div class="readOnlyMode" >
                                                        <label class="slds-checkbox--toggle" id="Toggle">                                                            
                                                            <apex:inputCheckbox value="{!isActiveMode}"  disabled="{!OR(NOT(isAdministrator), (orgStatus=='expired'))}" onclick="updateReadOnlyMode()" />
                                                            <span class="slds-checkbox--faux_container" aria-live="assertive">
                                                                <span class="slds-checkbox--faux slds-align_absolute-center" ></span>
                                                             </span>                                                            
                                                        </label>
                                                    </div>
                                                    </apex:outputpanel>
                                                </td>
                                                <td>
                                                   <div style="font-size:0.8rem;" class="slds-m-left--medium"> 
                                                            <a href="javascript:void(0);" onclick="ShowDifferences();" style="color:gray;">Explain the difference between Read Only and Active Mode</a>
                                                    </div>
                                                </td>
                                            </tr>
                                            <apex:outputpanel >
                                            <tr>
                                                <td>
                                                    <div class="slds-text-heading--medium">
                                                        <apex:outputPanel rendered="{!IF(orgStatus =='subscribed', true, false)}">
                                                            You have an active, valid subscription to Breadwinner
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!IF(orgStatus =='trial', true, false)}">
                                                            Your fully-featured free trial has been activated
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!IF(orgStatus =='expired', true, false)}">
                                                            Your trial/subscription has expired
                                                        </apex:outputPanel>
                                                    </div>
                                                    <apex:outputPanel rendered="{!IF(orgStatus =='expired', true, false)}" styleClass="slds-text-body--small  slds-m-left--xx-small" > 
                                                            Please contact sales@breadwinner.com<div style="display:{!IF(OR(isDeveloperOrg,isSandbox),'none','inline')}">, or <a style="font-size: 12px;color: gray;" href="{!breadwinnerPaymentPageURL}" target="_blank">click here to Subscribe</a>.</div>
                                                    </apex:outputPanel>
                                                </td>
                                                <td>
                                                    <div class="textDiv">
                                                        <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/green_check.png')}" rendered="{!orgStatus !='expired'}" /><!--rendered="{!IF(OR(orgStatus =='trial',orgStatus =='subscribed'), true, false)}"/-->                              
                                                        <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/red_check.png')}" rendered="{!IF(orgStatus =='expired', true, false)}"/> 
                                                    </div>
                                                </td>
                                                <td style="font-size:12px;">
                                                    <div class="slds-m-left--small slds-text-heading--medium">
                                                        <apex:outputPanel layout="block" rendered="{!IF(orgStatus =='trial', true, false)}" >
                                                            Your trial will expire in {!noOfDaysLeft} days 
                                                        </apex:outputPanel>
                                                    </div>
                                                </td>
                                            </tr>
                                            </apex:outputpanel>
                                            <apex:outputPanel >
                                                <tr>
                                                    <td style="width:50%">
                                                        <apex:outputPanel id="consumerHeaderPanel">
                                                            <apex:outputPanel >
                                                                <div class="slds-text-heading--medium">
                                                                    Connect Breadwinner / Salesforce to QuickBooks Online
                                                                </div>
                                                                <apex:outputPanel layout="block" rendered="{!NOT(isMultiOrgEnabled)}" styleClass="slds-text-body--small" style="margin-left: 0.35rem;">
                                                                    Need to connect more than one QuickBooks Online org to Salesforce? Please contact&nbsp;
                                                                    <apex:outputLink onclick="OpenContactSupportTab();" value="javascript:void(0);" style="color: gray;">Breadwinner Support</apex:outputLink>
                                                                </apex:outputPanel>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </td>
                                                    <td> 
                                                        <div >
                                                            <apex:outputPanel id="consumerDetailCheckIconPanel">
                                                               <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/green_check.png')}" rendered="{!AND(isConnectedWithQBO , !isOAuthIssue)}"/>  
                                                                <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/yellow_check.png')}" rendered="{!AND(isOAuthIssue, isConnectedWithQBO)}"/> 
                                                                <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/red_check.png')}" rendered="{!!isConnectedWithQBO}"/>
                                                            </apex:outputPanel>
                                                        </div>
                                                    </td>
                                                    <td > 
                                                       <div style='display:{!if( AND(isAdministrator,listAppConfig!=null,listAppConfig.size==0),"block","none")}'>
                                                                    <table >
                                                                        <tr>
                                                                            <td Style="border:none; margin-top:0px;width:20%;" >
                                                                                <apex:outputLink styleClass="slds-m-left--small" rendered="{!AND(NOT(isConnectedWithQBO),orgStatus !='expired',isAdministrator)}" value="{!bwSetting.breadwinner_qbo__Endpoint_URL_Override__c}/api/qbo/pre_auth/{!$Organization.Id}?app_type=production&callbackurl={!URLENCODE(URLFOR($Page.breadwinner_qbo__CompleteAuth))}" >
                                                                                    <apex:image style="height: 47px;" url="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/Connect_to_QuickBooks_Medium.png')}"/>
                                                                                </apex:outputLink>
                                                                            </td>
                                                                            <td Style="border:none; margin-top:0px; line-height: initial;">
                                                                                <apex:outputPanel rendered="{!AND(NOT(isConnectedWithQBO),orgStatus !='expired')}"> 
                                                                                    <div style="font-size:12px;color:rgba(128, 128, 128, 0.52);" Class='slds-m-right--large'>
                                                                                        Connecting to a QuickBooks Online<br/>Developer Sandbox?&nbsp;<apex:outputLink value="{!bwSetting.breadwinner_qbo__Endpoint_URL_Override__c}/api/qbo/pre_auth/{!$Organization.Id}?app_type=sandbox&callbackurl={!URLENCODE(URLFOR($Page.breadwinner_qbo__CompleteAuth))}" style="font-size:12px;color:rgba(128, 128, 128, 0.52);" >Click here</apex:outputLink>
                                                                                    </div>
                                                                                </apex:outputPanel>
                                                                            </td>
                                                                        </tr>
                                                                    </table>
                                                            
                                                        </div>
                                                    <div >
                                                                
                                                        <apex:outputPanel id="consumerDetailLinkPanel">
                                                                <table>                                                                
                                                                 <apex:repeat value="{!listAppConfig}" var="appConfig">
                                                                    <tr>
                                                                        <td Style="border:none; margin-top:0px;">
                                                                           
                                                                            <apex:outputPanel layout="block" rendered="{!OR(isConnectedWithQBO,AND(orgStatus =='expired',isConnectedWithQBO))}" style="margin-left: 0.11rem;">
                                                                                <div class="slds-text-heading--medium">
                                                                                    {!appConfig.breadwinner_qbo__Connecting_App_Name__c} is Connected
                                                                                </div>
                                                                                <apex:outputPanel rendered="{!isAdministrator}" style="white-space: nowrap;margin-left: 6px;">
                                                                                    <apex:outputLink style="font-size:12px; color:grey;" value="{!($Page.breadwinner_qbo__InventoryImportPage)}?id={!appConfig.breadwinner_qbo__QBO_Org_ID__c}">Import Products and Services from QuickBooks Online</apex:outputLink>
                                                                                    &nbsp;
                                                                                    <apex:outputLink style="{!IF(OR(appConfig.breadwinner_qbo__Need_To_Reconnect__c),'font-size:18px;color:red;font-weight:bold;','font-size:12px;color:grey;')}" value="{!bwSetting.breadwinner_qbo__Endpoint_URL_Override__c}/api/qbo/pre_auth/{!$Organization.Id}?app_type={!IF(CONTAINS(appConfig.breadwinner_qbo__Connecting_App_Name__c, 'Sandbox Company'), 'sandbox', 'production')}&callbackurl={!URLENCODE(URLFOR($Page.breadwinner_qbo__CompleteAuth))}">{!IF(OR(appConfig.breadwinner_qbo__Need_To_Reconnect__c),"Please reconnect with QuickBooks Online","Reconnect")}</apex:outputLink>
                                                                                    <apex:outputPanel >&nbsp;
                                                                                        <apex:commandLink style="font-size:12px;color:grey;"  onclick="return window.confirm('Are you sure to disconnect from QuickBooks Online?\n\nPlease note that disconnecting this will not delete any data in Salesforce. All imported Invoices, Accounts, or Breadwinner Account Connection records will remain in Salesforce.');"  value="Disconnect" action="{!disconnectQBO}" status="assing-action-status">
                                                                                        <apex:param name="QBOOrgID" value="{!appConfig.breadwinner_qbo__QBO_Org_ID__c}" assignto="{!qboOrgToDisconnect}"/>
                                                                                        </apex:commandLink>
                                                                                    </apex:outputPanel>
                                                                                </apex:outputPanel>
                                                                                
                                                                            </apex:outputPanel>
                                                                        </td>
                                                                       
                                                                    </tr>
                                                                 </apex:repeat>
                                                                 </table>
                                                                 <table border='0'>
                                                                   <tr  >
                                                                     <!--<td><b><i><u>Add another QBO Org</u></i></b><br/></td><td/>-->
                                                                     <a class='slds-m-left--medium' Style="display:{!IF(AND((isMultiOrgEnabled ),(orgStatus !='expired'),(isAdministrator),(listAppConfig!=null&&listAppConfig.size>0)),'block','none')}" onclick="connectWithQBO('QBOConnectionDisp');"><b><i><u>Add another QuickBooks Online Org</u></i></b></a>
                                                                    </tr>
                                                                    <tr id='QBOConnectionDisp' style="display:none" >
                                                                     <td  style='border-top: 0px;'  > &nbsp;&nbsp;
                                                                         <apex:outputLink rendered="{!AND(orgStatus !='expired',isAdministrator)}" value="{!bwSetting.breadwinner_qbo__Endpoint_URL_Override__c}/api/qbo/pre_auth/{!$Organization.Id}?app_type=production&callbackurl={!URLENCODE(URLFOR($Page.breadwinner_qbo__CompleteAuth))}" >
                                                                            <apex:image style="height: 47px;" url="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/Connect_to_QuickBooks_Medium.png')}"/>
                                                                          </apex:outputLink>
                                                                      </td>
                                                                      <td style='border-top: 0px;'>
                                                                      <apex:outputPanel rendered="{!(orgStatus !='expired')}"> 
                                                                        <div style="font-size:12px;color:rgba(128, 128, 128, 0.52);">
                                                                            Connecting to a QuickBooks Online<br/>Developer Sandbox?&nbsp;<apex:outputLink value="{!bwSetting.breadwinner_qbo__Endpoint_URL_Override__c}/api/qbo/pre_auth/{!$Organization.Id}?app_type=sandbox&callbackurl={!URLENCODE(URLFOR($Page.breadwinner_qbo__CompleteAuth))}" style="font-size:12px;color:rgba(128, 128, 128, 0.52);" >Click here</apex:outputLink>
                                                                        </div>
                                                                      </apex:outputPanel>
                                                                      </td>
                                                                   </tr>
                                                                    </table>
                                                                
                                                         </apex:outputPanel>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr style="display:{!IF(isAdministrator,'','none')}"> 
                                                <td>                                                      
                                                    <div class="slds-text-heading--medium">
                                                        
                                                        <apex:outputPanel id="pageLayoutHeadingPanel" >
                                                            <script>
                                                            function showLayoutEditsection(){
                                                                document.getElementById("showlayoutTRId").style.display="";
                                                                assignpermissionsettoCurrentUser();
                                                             }
                                                            function HideLayoutEditsection(){
                                                                var isLayoutUpdated = {!isLayoutUpdated};
                                                                    if(isLayoutUpdated ){
                                                                    document.getElementById("showlayoutTRId").style.display="none";}
                                                             }
                                                            </script>
                                                            <apex:outputPanel rendered="{!AND(NOT(isLayoutUpdated),unableToAddRemoteSiteSetting) }" >
                                                                <a target="_blank" href="{!breadwinnerSupportPortalURL}/customer/portal/articles/1607408-configure-your-page-layouts">
                                                                    Read Instructions
                                                                </a>
                                                                on configuring your&nbsp;
                                                                <apex:outputLink value="/ui/setup/layout/PageLayouts?type=Account">Page Layout
                                                                </apex:outputLink>
                                                                <!-- div style="font-size:12px;">(we can&apos;t monitor this, so no green check will appear)</div -->
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{!OR(isLayoutUpdated,NOT(unableToAddRemoteSiteSetting))}">
                                                                <apex:outputPanel rendered="{!AND(NOT(isLayoutUpdated),showProgressBar,isConnectedWithQBO)}">
                                                                    <apex:commandLink style="color:black" onclick="showLayoutEditsection();" status="assign-action-status"  reRender="pgmsgtag,pageLayoutHeadingPanel,pageLayoutUpdatePanel" >Update your Account and Opportunity Page Layouts</apex:commandLink>
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{!OR(isLayoutUpdated,Not(isConnectedWithQBO))}">
                                                                    Update your Account and Opportunity Page Layouts
                                                                </apex:outputPanel>
                                                                                                                            
                                                            </apex:outputPanel>
                                                                <apex:actionfunction name="assignpermissionsettoCurrentUser" action="{!selectedUsetPermissionSetassignment}" status="assign-action-status" reRender="noofAssignee,pmStatus"/>
                                                        </apex:outputPanel>
                                                    </div>
                                                </td> 
                                                <td>
                                                    <div >
                                                        <apex:outputPanel id="pagelayoutCheck" >
                                                            <apex:outputPanel >
                                                                <apex:image value="{!IF(NOT(showProgressBar),  '/img/prev_cal_arrow.gif', IF(isLayoutUpdated, URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/green_check.png') , URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/red_check.png')))}" height="32" width="32"/>
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </td>  
                                                
                                                <td>
                                                    <!-- -- Toggle button for page layouts update in Professional orgs (API not enabled) -->
                                                    <apex:outputPanel id="professionalUpdate">
                                                        <div class="slds-m-left--medium">
                                                            <apex:outputPanel styleClass="slds-text-body--small" style="color:gray;" rendered="{!unableToAddRemoteSiteSetting && NOT(bwSetting.breadwinner_qbo__Page_Layouts_Updated__c)}">
                                                                When you have configured your page layouts, please click on the toggle below to mark it completed.
                                                                <div class="slds-clearfix">
                                                                    <div class="slds-form-element slds-float--left">
                                                                        <label class="slds-checkbox--toggle slds-grid">
                                                                            <input type="checkbox" name="Page_Layouts_Updated_Checkbox" id="profLayoutcheckbox" aria-describedby="toggle-desc" onchange="Check_PageLayoutscheckbox(this);" />
                                                                            <span id="toggle-desc" class="slds-checkbox--faux_container" aria-live="assertive">
                                                                                <span class="slds-checkbox--faux"></span>
                                                                                <span class="slds-checkbox--on">Done</span>
                                                                                <span class="slds-checkbox--off">Not Done</span>
                                                                            </span>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                            </apex:outputPanel>
                                                        </div>
                                                        <apex:actionFunction name="update_Page_Layouts_Updated_Checkbox_fun" action="{!update_Page_Layouts_Updated_Checkbox}" status="assign-action-status" reRender="progressPanel,infoPanel,pagelayoutCheck,pageLayoutUpdatePanel,pageLayoutHeadingPanel,professionalUpdate,pagelayoutCheck" oncomplete="addallfuncs();">
                                                            <apex:param value="" name="param_Page_Layouts_Updated"/>
                                                        </apex:actionFunction>
                                                    </apex:outputPanel>
                                                    
                                                </td>                         
                                            </tr>
                                            <tr style="border:none;display:none" id="showlayoutTRId" >
                                                <td colspan="3" style="border:none;border-top:0px;">
                                                    <apex:outputPanel id="pageLayoutUpdatePanel" >
                                                        <apex:outputPanel rendered="{!AND(True,NOT(isLayoutUpdated))}" >
                                                            <div class="slds-box" >
                                                                <div  class="slds-text-title slds-m-bottom--medium">
                                                                    <apex:pageMessages ></apex:pageMessages>
                                                                    Breadwinner won't change, move, or remove any of your fields, it will just add the Breadwinner fields. 
                                                                    You can still edit the page layouts further after Breadwinner auto-update them, or manually undo or alter any changes.
                                                                </div>
                                                                <div>
                                                                    
                                                                    
                                                                    <label class="slds-checkbox">
                                                                        <apex:inputCheckbox value="{!updateAccountPageLayouts}" />
                                                                        <span class="slds-checkbox--faux"></span>
                                                                        <span class="slds-form-element__label slds-m-left--small">
                                                                            Update my Account Page Layout(s) with Breadwinner's Fields, Charts, and Invoice Related Lists
                                                                        </span>
                                                                    </label>                                                        
                                                                </div>
                                                                <div>
                                                                    <label class="slds-checkbox">
                                                                        <apex:inputCheckbox value="{!updateOpportunityPageLayouts}" />
                                                                        <span class="slds-checkbox--faux"></span>
                                                                        <span class="slds-form-element__label slds-m-left--small">
                                                                            Update my Opportunity Page Layout(s) with Breadwinner's Invoice Related Lists
                                                                        </span>
                                                                    </label>
                                                                </div>
                                                                
                                                                <div class="slds-m-top--medium" >
                                                                    <apex:commandButton value="Update Automatically" styleClass="slds-button slds-button--brand" action="{!updatePageLayouts}" reRender="progressPanel,infoPanel,pagelayoutCheck,pageLayoutUpdatePanel,pageLayoutHeadingPanel" oncomplete="addallfuncs();HideLayoutEditsection();checkIfLayoutIsUpdated1();" disabled="{!NOT(isAdministrator)}" status="assign-action-status" />
                                                                    <apex:outputPanel styleClass="slds-text-title slds-m-left--medium">
                                                                        Or, alternatively, update them yourself following&nbsp;<a href="{!breadwinnerSupportPortalURL}/customer/portal/articles/1607408-configure-your-page-layouts" style="color: gray;" target="_blank">our suggested Page Layout guide</a>.
                                                                    </apex:outputPanel>
                                                                </div>
                                                            </div>  
                                                        </apex:outputPanel>
                                                    </apex:outputPanel>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class="slds-text-heading--medium">
                                                        Assign Breadwinner Permission Sets

                                                    </div>
                                                    <apex:outputPanel layout="block" styleClass="slds-text-body--small" style="display:{!IF(AND(isAdministrator,noofUsersNotAssigned!=0 ),'','none')};margin-left: 0.35rem;">
                                                        Currently Breadwinner assigns permission sets to Salesforce Licensed Users only. You may assign them to other users&nbsp;<a style="color:grey;" target="{!IF(OR($User.UIThemeDisplayed = 'Theme4d',$User.UIThemeDisplayed = 'Theme4t'),'','_blank')}" href="{!breadwinnerSupportPortalURL}/customer/en/portal/articles/2438620-breadwinner-security-and-permissions---adding-users-to-breadwinner?b_id=9335">manually</a>
                                                    </apex:outputPanel>
                                                </td>
                                                <td>
                                                    <apex:outputPanel id="pmStatus" styleclass="textDiv" style="text-align: center;"> 
                                                        <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/green_check.png')}" rendered="{!noofUsersNotAssigned==0}" />                              
                                                        <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/red_check.png')}" rendered="{!noofUsersNotAssigned==totalUsersCount}"/>
                                                        <apex:image styleClass="crossIcon"  value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/yellow_check.png')}" rendered="{!AND(noofUsersNotAssigned!=totalUsersCount,noofUsersNotAssigned>0)}"/> 
                                                    </apex:outputPanel>
                                                 </td>
                                                <td >
                                                    <apex:outputPanel id="noofAssignee" style="visibility:{!IF(AND(isAdministrator,noofUsersNotAssigned>0),'visible','hidden')};font-size:12px;">
                                                    <div class="slds-m-left--medium">
                                                        <div>
                                                            <apex:commandLink action="{!assignPermissionSet}" style="color:grey;" status="assign-action-status">Give all users Standard Permissions to Breadwinner
                                                            <apex:param name="permissionTypeParam" value="Standard" assignTo="{!permissionSetType}"/> 
                                                            </apex:commandLink>
                                                        </div>
                                                        <div class="slds-m-top--xxx-small">
                                                            <apex:commandLink action="{!assignPermissionSet}" style="color:grey;" status="assign-action-status">Give all users Read-Only Permissions to Breadwinner
                                                            <apex:param name="permissionTypeParam" value="ReadOnly" assignTo="{!permissionSetType}"/> 
                                                            </apex:commandLink>
                                                        </div>
                                                    </div>
                                                    </apex:outputPanel>
                                                </td> 
                                            </tr>
                                        </apex:outputPanel>
                                            <tr>
                                                <td>  
                                                    <div class="slds-text-heading--medium">
                                                        <apex:outputPanel id="accountSyncPanelMO">
                                                            <!--<apex:outputPanel rendered="{!IF(OR(isAccountSyncDone,NOT(isConnectedWithQBO)),true,false)}">
                                                                Sync Customers to Salesforce Accounts
                                                            </apex:outputPanel>-->
                                                            Sync Customers to Salesforce Accounts                                                            
                                                        </apex:outputPanel>
                                                    </div>
                                                </td>
                                                <td> 
                                                    <div >
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/green_check.png')}" rendered="{!AND(isAccountSyncDone,NOT(areThereUnmatched_QBO_Companies))}"/>
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/yellow_check.png')}" rendered="{!AND(isAccountSyncDone,areThereUnmatched_QBO_Companies)}"/> 
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/red_check.png')}" rendered="{!!isAccountSyncDone}"/>
                                                    </div>
                                                </td>
                                                <td style="font-size:12px;">
                                                    <div class="slds-m-left--medium" > 
                                                        <apex:repeat value="{!listAppConfig}" var="appC" rendered="{!AND(isAdministrator,orgStatus!='expired')}">
                                                            
                                                            <apex:outputLink rendered="{!AND(NOT(appC.breadwinner_qbo__Is_Account_Sync_Completed__c), isConnectedWithQBO)}" style="color:red;font-size: 14px;display: block;" value="{!($Page.breadwinner_qbo__AccountSync)}">
                                                                Preview Account Sync
                                                                <apex:param name="company_id" value="{!appC.breadwinner_qbo__QBO_Org_ID__c}" />
                                                                <apex:outputPanel rendered="{!isMultiOrgEnabled}">&nbsp;for {!appC.Connecting_App_Name__c}</apex:outputPanel>
                                                            </apex:outputLink>
                                                            
                                                            <apex:outputLink rendered="{!AND(appC.breadwinner_qbo__Is_Account_Sync_Completed__c, areThereUnmatched_QBO_Companies, QBO_orgToUnmatchedCompanyStatusMap[appC.breadwinner_qbo__QBO_Org_ID__c], isConnectedWithQBO)}" style="color:red;display: block;" value="{!($Page.breadwinner_qbo__AccountSync)}">
                                                                There are a few unmatched QuickBooks Online Customers
                                                                <apex:param name="company_id" value="{!appC.breadwinner_qbo__QBO_Org_ID__c}" />
                                                                <apex:outputPanel rendered="{!isMultiOrgEnabled}">&nbsp;for {!appC.Connecting_App_Name__c}</apex:outputPanel>
                                                            </apex:outputLink>
                                                            
                                                            <!-- apex:outputPanel rendered="{!AND(appC.Is_Account_Sync_Completed__c, NOT(QBO_orgToUnmatchedCompanyStatusMap[appC.QBO_Org_ID__c]))}" style="color:grey;">  
                                                                    If asked by support, you may wish to&nbsp;
                                                                    <apex:outputLink rendered="{!appC.Is_Account_Sync_Completed__c}" value="{!($Page.breadwinner_qbo__AccountSync)}" style="color:grey;">restart the Account Sync 
                                                                        <apex:param name="company_id" value="{!appC.breadwinner_qbo__QBO_Org_ID__c}" />
                                                                    </apex:outputLink>     for {!appC.Connecting_App_Name__c} 
                                                                </apex:outputPanel -->  
                                                            
                                                        </apex:repeat>
                                                        <apex:outputPanel layout="block" styleClass="slds-m-top--xxx-small" rendered="{!isAccountSyncDone}" style="color:grey;"> 
                                                            <apex:outputPanel rendered="{!isAdministrator}">
                                                                If asked by support, you may wish to&nbsp; 
                                                                <apex:commandLink action="{!restartHistoricalSync}" style="color:grey;" status="assign-action-status" reRender="RestartHistoricalSyncScriptPanel" onComplete="onCompletionOfRestartHistoricalSync();">restart the Invoice Sync 
                                                                </apex:commandLink>&nbsp;<apex:commandLink action="{!restartHistoricalTotalSync}" style="color:grey;" status="assign-action-status">.</apex:commandLink><apex:outputPanel rendered="{!isMultiOrgEnabled}">for All QuickBooks Online Orgs</apex:outputPanel> 
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div> 
                                                </td>

                                            </tr>
                                            <!-- tr>
                                                <td>
                                                    <div class="slds-text-heading--medium ">  Sync Invoices (starts automatically)</div>
                                                </td>
                                                <td> 
                                                    <div >
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/green_check.png')}" rendered="{!isAccountSyncDone}"/>  
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/red_check.png')}" rendered="{!!isAccountSyncDone}"/>
                                                    </div>
                                                </td>  
                                                <td style="font-size:12px;">
                                                    <div class="slds-m-left--medium">
                                                        <apex:outputPanel rendered="{!isAccountSyncDone}" style="color:grey;"> 
                                                            <apex:outputPanel rendered="{!isAdministrator}">
                                                                 If asked by support, you may wish to&nbsp; 
                                                                <apex:commandLink action="{!restartHistoricalSync}" style="color:grey;" status="assign-action-status" reRender="RestartHistoricalSyncScriptPanel" onComplete="onCompletionOfRestartHistoricalSync();">restart the Invoice Sync 
                                                                </apex:commandLink>&nbsp;<apex:commandLink action="{!restartHistoricalTotalSync}" style="color:grey;" status="assign-action-status">.</apex:commandLink><apex:outputPanel rendered="{!isMultiOrgEnabled}">for All QBO Orgs</apex:outputPanel> 
                                                            </apex:outputPanel>
                                                         </apex:outputPanel>
                                                    </div>
                                                </td>                          
                                            </tr -->
                                            
                                            <tr>
                                                <td>  
                                                    <div class="slds-text-heading--medium" >
                                                        Subscribe to Breadwinner                                                                   
                                                    </div>
                                                </td> 
                                                <td>
                                                    <div  >
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/green_check.png')}" rendered="{!IF(orgStatus =='subscribed', true, false)}"/>
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/yellow_check.png')}" rendered="{!IF(AND(orgStatus =='trial',NOT(isSandbox), NOT(isDeveloperOrg)), true, false)}"/>                              
                                                        <apex:image value="{!URLFOR($Resource.breadwinner_qbo__Breadwinner_QBO, 'Breadwinner_QBO/Images/red_check.png')}" rendered="{!IF(orgStatus =='expired', true, false)}"/>                                                             
                                                    </div>
                                                </td>  
                                                <td></td>     
                                            </tr>
                                            <tr >
                                                <td style="border:none; margin-top:0px;" class="slds-text-title" colspan="3">
                                                    <div style="margin-left: 0.35rem;">
                                                        <apex:outputPanel rendered="{!IF(orgStatus =='subscribed', true, false)}">
                                                            Your subscription to Breadwinner is Active.
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!IF(orgStatus =='trial', true, false)}">
                                                            <apex:outputPanel rendered="{!AND(NOT(isSandbox), NOT(isDeveloperOrg))}">
                                                                To guarantee continued access, subscribe to Breadwinner before <br/>
                                                                your trial expires in {!noOfDaysLeft} days. We will email you with more information.
                                                                <br/>
                                                                <a style="font-size: 12px;" href="{!breadwinnerPaymentPageURL}" target="_blank">Click here to Subscribe to Breadwinner</a>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{!isSandbox}">
                                                                This is running in a Sandbox. Because payment is tied to the instance where Breadwinner is installed, you can only pay for Breadwinner from a production org, not a Sandbox.<br/>
                                                                If this was a Salesforce Production org, you would be given the option to pay here.
                                                                <br/> <br/>
                                                                If you need to extend your free trial, which will expire in {!noOfDaysLeft} days, please click Contact Support to the left and file a case requesting a 2 week extension of your Sandbox trial. Please quote Org ID <b>{!$Organization.Id}</b>.
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!isDeveloperOrg}">
                                                            You cannot subscribe on a Developer Org.<br/>
                                                            However, you can request an extension of your free trial{!IF(orgStatus =='expired','',', which expires in '+Text(noOfDaysLeft)+' days,')} by contacting&nbsp;<apex:commandLink value="Breadwinner Support" onclick="OpenContactSupportTab();" reRender="theTabPanel" status="assign-action-status" style="color: gray;">
                                                            </apex:commandLink>.
                                                            <br/>Please mention that your Org ID is {!$Organization.Id}.
                                                        </apex:outputPanel>
                                                        <apex:outputPanel rendered="{!IF(orgStatus =='expired', true, false)}">
                                                            <apex:outputPanel rendered="{!AND(NOT(isSandbox), NOT(isDeveloperOrg))}">
                                                                You don't have an active subscription to Breadwinner.<br/>
                                                                <br/>
                                                                <a style="font-size: 12px;" href="{!breadwinnerPaymentPageURL}" target="_blank">Click here to Subscribe to Breadwinner</a>
                                                            </apex:outputPanel>
                                                            <apex:outputPanel rendered="{!isSandbox}">
                                                                This is a Sandbox Salesforce org, and you cannot pay for Breadwinner in a Sandbox, only in a Production Org.
                                                                <br/>
                                                                However, if you need to extend your free trial, please file a case using the Contact Support section on the left, requesting a trial extension, and please quote Org ID <b>{!$Organization.Id}</b>.
                                                            </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </div>
                                                </td>
                                            </tr>
                                        </table>
                                        <apex:outputPanel layout="block" styleClass="slds-m-left--medium slds-m-bottom--medium" id="SettingSectionPanel">
                                            <apex:commandLink action="{!showEditSettingSection}" status="assign-action-status" rerender="SettingSectionPanel" rendered="{!isAdministrator}"> .
                                            </apex:commandLink>
                                            <div class="slds-grid slds-wrap">
                                                <div class="slds-size--1-of-1 slds-medium-size--3-of-6 slds-large-size--6-of-12">
                                                    <apex:outputPanel rendered="{!isEditSettingSection}">  
                                                        <div class="slds-box slds-float--left">
                                                            <label class="slds-checkbox">
                                                                <span class="slds-form-element__label">
                                                                    {!$ObjectType.breadwinner_qbo__Breadwinner_Settings__c.Fields.breadwinner_qbo__Multi_Org_Enabled__c.Label}
                                                                </span>
                                                                <apex:inputField value="{!bwSetting.breadwinner_qbo__Multi_Org_Enabled__c}"/> 
                                                                <span class="slds-checkbox--faux"></span>
                                                                
                                                            </label>
                                                                                                                                                                               
                                                            <div class="slds-m-top--medium">
                                                                <apex:commandButton value="Save" styleClass="slds-button slds-button--brand" action="{!saveSettingSection}" status="assign-action-status"/>   
                                                                <apex:commandButton value="Cancel" styleClass="slds-button slds-button--neutral" action="{!cancelSettingSection}" reRender="SettingSectionPanel" status="assign-action-status"/>
                                                            </div>  
                                                        </div>
                                                    </apex:outputPanel>
                                                </div>
                                                
                                                <div  align="right" class="slds-size--1-of-1 slds-medium-size--3-of-6 slds-large-size--6-of-12">
                                                    <div >
                                                        <apex:commandLink action="{!showEndpointUrlEditor}" rendered="{!AND(NOT(isConnectedWithQBO),isAdministrator)}" status="assign-action-status" rerender="SettingURL"> .
                                                        </apex:commandLink> 
                                                    </div>
                                                    <apex:outputPanel id="SettingURL" layout="block" >
                                                        <apex:outputPanel layout="block" styleclass="slds-box slds-float--right" rendered="{!showEndpointURLSetting}">
                                                            <div class="slds-form-element">
                                                                <label class="slds-form-element__label" >{!$ObjectType.Breadwinner_Settings__c.Fields.Endpoint_URL_Override__c.Label}</label>
                                                                <div class="slds-form-element__control">
                                                                    <apex:selectList value="{!bwSetting.breadwinner_qbo__Endpoint_URL_Override__c}" size="1" styleClass="slds-input">
                                                                        <apex:selectOptions value="{!AvailableEndpointURLs}">
                                                                        </apex:selectOptions>
                                                                    </apex:selectList>
                                                                </div>
                                                            </div>
                                                            <div class="slds-m-top--medium">
                                                                <apex:commandButton value="Save & Create Remotesite" styleClass="slds-button slds-button--brand" action="{!saveAndCreateRemoteSite}" status="assign-action-status" rendered="{!unableToAddRemoteSiteSetting}"/>
                                                                <apex:commandButton value="Save" styleClass="slds-button slds-button--brand" action="{!updateEndpointUrlOverride}" status="assign-action-status"/>
                                                                <apex:commandButton value="Cancel" styleClass="slds-button slds-button--neutral" action="{!hideEndpointUrlEditor}" reRender="SettingURL" status="assign-action-status"/>
                                                            </div>
                                                        </apex:outputPanel> 
                                                    </apex:outputPanel> 
                                                </div>
                                            </div>
                                            
                                        </apex:outputPanel>   
                                    </div>
                                    </div>
                                </div>
                                <div id="SetupAndConfig-TAB2" class="slds-hide" aria-labelledby="InvoiceConfiguration">
                                    
                                    <div id="InvoiceConfigIframeDivId">
                                        
                                    </div>
                                </div>
                                <div id="SetupAndConfig-TAB3" class="slds-hide" aria-labelledby="Chargent">
                                    
                                    <div id="ChargentIframeDivId">
                                        
                                    </div>
                                </div>
                                
                                <div id="Learn-TAB1" class="slds-hide" aria-labelledby="University">
                                    <!-- -----------------------------University Tab header start ---------------------------->
                                    <div class="slds-page-header" role="banner">
                                        <div class="slds-media">
                                            <div class="slds-media__figure">
                                                <span class="slds-icon_container slds-icon-custom-custom16" title="University">
                                                    <svg aria-hidden="true" class="slds-icon">
                                                        <use xlink:href="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/SLDS/assets/icons/custom-sprite/svg/symbols.svg#custom16')}"></use>
                                                    </svg>
                                                </span>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="University">University</p>
                                                <p class="slds-text-body--small">Breadwinner • QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------University Tab header END ---------------------------->
                                </div>
                                <div id="Learn-TAB2" class="slds-hide" aria-labelledby="KnowledgeBase">
                                    <!-- -----------------------------KnowledgeBase Tab header start ---------------------------->
                                    <div class="slds-page-header" role="banner">
                                        <div class="slds-media">
                                            <div class="slds-media__figure">
                                                <span class="slds-icon_container slds-icon_container--circle slds-icon-action-description" title="Knowledge Base">
                                                    <svg aria-hidden="true" class="slds-icon slds-icon--small">
                                                        <use xlink:href="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/SLDS/assets/icons/action-sprite/svg/symbols.svg#google_news')}"></use>
                                                    </svg>
                                                </span>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="Knowledge Base">Knowledge Base</p>
                                                <p class="slds-text-body--small">Breadwinner • QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------KnowledgeBase Tab header END ---------------------------->
                                    
                                    <div id="KnowledgeBaseIframeDivId">
                                        
                                    </div>
                                </div>
                                <div id="Learn-TAB3" class="slds-hide" aria-labelledby="ContactSupport">
                                    <!-- -----------------------------ContactSupport Tab header start ---------------------------->
                                    <div class="slds-page-header" role="banner">
                                        <div class="slds-media">
                                            <div class="slds-media__figure">
                                                <span class="slds-icon_container slds-icon_container--circle slds-icon-action-description" title="Contact Support">
                                                    <svg aria-hidden="true" class="slds-icon slds-icon--small">
                                                        <use xlink:href="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/SLDS/assets/icons/action-sprite/svg/symbols.svg#email')}"></use>
                                                    </svg>
                                                </span>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="Contact Support">Contact Support</p>
                                                <p class="slds-text-body--small">Breadwinner • QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------ContactSupport Tab header END ---------------------------->
                                    
                                    <div id="ContactSupportIframeDivId">
                                        
                                    </div>
                                </div>
                                
                                
                                <div id="ADMIN-1" class="slds-hide" role="tabpanel" aria-labelledby="Billing">
                                    <!-- -----------------------------Billing Tab header start ---------------------------->
                                    <div class="slds-page-header" role="banner">
                                        <div class="slds-media">
                                            <div class="slds-media__figure">
                                                <span class="slds-icon_container slds-icon-custom-custom17" title="Billing">
                                                    <svg aria-hidden="true" class="slds-icon">
                                                        <use xlink:href="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/SLDS/assets/icons/custom-sprite/svg/symbols.svg#custom17')}"></use>
                                                    </svg>
                                                </span>
                                                
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="Billing">Billing</p>
                                                <p class="slds-text-body--small">Breadwinner • QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------Billing Tab header END ---------------------------->
                                    <div class="slds-m-top--medium slds-m-horizontal--small" id="BillingDiv" >
                                        <apex:outputPanel rendered="{!isAdministrator}" layout="block">
                                            <h3 class="slds-section-title--divider slds-m-top--medium">Your Breadwinner Subscription </h3>
                                            <apex:outputPanel rendered="{!orgStatus !='subscribed'}" layout="block">
                                            
                                            <div class="slds-text-body--small  slds-m-horizontal--small slds-m-top--medium"> 
                                                <apex:outputPanel rendered="{!IF(orgStatus =='expired', true, false)}" layout="block" styleClass="slds-m-horizontal--small slds-text-longform" style="color: #5876a3;">Your Data Subscription to Breadwinner has Expired. Please contact sales@breadwinner.com<div style="display:{!IF(OR(isDeveloperOrg,isSandbox),'none','inline')}">, or <a style="font-size: 12px;color: gray;" href="{!breadwinnerPaymentPageURL}" target="_blank">click here to Subscribe</a>.</div></apex:outputPanel>
                                                <apex:outputPanel rendered="{!IF(orgStatus !='expired', true, false)}">
                                                    This tab is used to display billing information, and will be active once you subscribe.
                                                    <br/><br/>You have not subscribed to Breadwinner yet
                                                    <a href="{!breadwinnerPaymentPageURL}" target="_blank">Click here to Subscribe to Breadwinner</a>
                                                 </apex:outputPanel>  
                                            </div>
                                            </apex:outputPanel>   
                                            <apex:outputPanel rendered="{!Not(ISBLANK(hostedToken))}" styleClass="slds-m-horizontal--small" layout="block">
                                                <br/> 
                                                <script>
                                                    function showImages(imgId)
                                                    {   
                                                        j$('.imgCls').hide();
                                                        j$('#DivImgs').show();
                                                        j$('#'+imgId).show();
                                                        
                                                    }
                                                    j$('#BillingDiv').click (function (e) {
                                                    if(!(j$(e.target).is('.clickBtnCls') )){
                                                        if( j$('#DivImgs').css('display') != 'none' )
                                                            j$('#DivImgs').hide();
                                                        }
                                                    });
                                                    
                                                </script>

                                                <button class="slds-button slds-button--brand slds-m-top--x-small clickBtnCls " onclick="showImages('CCEditImg')"  type="button">Edit my Credit Card Details </button>
                                                <button class="slds-button slds-button--brand slds-m-top--x-small clickBtnCls " onclick="showImages('EditContactInfoImg')"  type="button"> Edit Email Address for Billing </button>                                              
                                                <button class="slds-button slds-button--brand slds-m-top--x-small clickBtnCls " onclick="showImages('DownloadInvoicesImg')"  type="button"> Download my PDF Invoices/Statements </button>
                                                <button class="slds-button slds-button--brand slds-m-top--x-small clickBtnCls " onclick="showImages('CancelImg')"  type="button"> Cancel my Breadwinner Subscription</button>
                                                
                                                <div id="DivImgs" style="display:none;">
                                                    <div aria-hidden="false" aria-labelledby="prompt-heading-id" aria-describedby="prompt-message-wrapper" role="alertdialog" class="slds-modal slds-modal--prompt slds-fade-in-open">
                                                        <div class="slds-modal__container " role="document" id="prompt-message-wrapper" tabindex="0" style="max-width:43rem;">
                                                            <a href="{!billingPortalLink}" target="_blank">  
                                                                <img src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/Images/Update_payment.png')}"  id="CCEditImg"   style="display:none"  class="imgCls"/>
                                                                <img src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/Images/Cancel_Subscription.png')}"  id="CancelImg"   style="display:none"  class="imgCls"/>
                                                                <img src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/Images/Download_statements.png')}"  id="DownloadInvoicesImg"   style="display:none"  class="imgCls"/>
                                                                <img src="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/Images/Edit_ContactInfo.png')}"  id="EditContactInfoImg"   style="display:none"  class="imgCls"/>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                               <!--<p class="slds-m-top--medium"> Access Billing Portal by clicking&nbsp;<a href="{!billingPortalLink}" target="_blank">here</a>. </p> -->
                                             </apex:outputPanel>                                            
                                            
                                            <apex:outputPanel rendered="{!OR(orgStatus =='subscribed' ,orgStatus  == 'trial')}" layout="block">
                                            <h3 class="slds-section-title--divider slds-m-top--medium">Average Monthly Invoice Count </h3>
                                            <div class="slds-m-horizontal--small">
                                             <div class="slds-text-longform slds-m-top--medium">
                                                    <p>
                                                        Breadwinner is charged based on your monthly Invoice Volume, averaged over the last 3 months. 
                                                        We count Invoices created with Breadwinner, and Invoices created directly in your accounting system. 
                                                        We ignore Voided, and Deleted invoices.
                                                    </p>
                                                    <p>
                                                        We calculate the number of Invoices with an Invoice Date in the last 90 days, and divide by 3, to determine your average monthly volume.
                                                        Taking your average invoice count is beneficial to you the customer, as seasonal spikes or a particularly busy month are smoothed out.
                                                        If you consistently go over your limit, we will continue syncing your invoices, however we will contact you to begin the process of upgrading you to the next level.
                                                    </p>
                                                    <p>
                                                        You are on the {!bwSetting.breadwinner_qbo__Plan_Name__c} Plan and can sync up to {!ROUND(bwSetting.breadwinner_qbo__Invoice_Tier__c,0)} Average Invoices per month. You are currently averaging {!AverageMonthlyInvoiceCount} invoices per month.
                                                        <br/><br/>
                                                        <apex:outputLink value="{!$Page.breadwinner_qbo__InvoiceMapping}" styleclass="slds-button slds-button--brand"> Show how the Average Monthly Invoices are Calculated </apex:outputLink> 
                                                    </p>
                                                    
                                                </div>
                                                      
                                                <!--
                                                You are on the {!bwSetting.Plan_Name__c} Plan and can sync up to {!ROUND(bwSetting.Invoice_Tier__c,0)} Average Invoices per month. You are currently averaging {!AverageMonthlyInvoiceCount} invoices per month.
                                                <br/> <br/>
                                                If your Invoices volume goes over your plan amount, we will not cut off syncing or invoice creation, and Breadwinner will continue to work. However, if you are over your Invoice volume on a rolling 90-day period, we will upgrade you automatically to the appropriate plan.
                                                --> 
                                                
                                            </div>
                                            </apex:outputPanel>
                                            
                                        </apex:outputPanel>
                                        <apex:outputPanel rendered="{!NOT(isAdministrator)}">
                                            You must be a Salesforce System Administrator to access billing information.
                                        </apex:outputPanel>
                                    </div>
                                    
                                </div>
                                <div id="ADMIN-21" class="slds-hide" role="tabpanel" aria-labelledby="Troubleshooting">
                                    <!-- -----------------------------Troubleshooting Tab header start ---------------------------->
                                    <div class="slds-page-header" role="banner">
                                        <div class="slds-media">
                                            <div class="slds-media__figure">
                                                <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                    <use xlink:href="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/SLDS/assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                                </svg>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="Troubleshooting">Troubleshooting</p>
                                                <p class="slds-text-body--small">Breadwinner • QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------Troubleshooting Tab header END ---------------------------->
                                    
                                    <div id="TroubleshootIframeDivId">
                                        
                                    </div>
                                </div>
                                <div id="ADMIN-22" class="slds-hide" role="tabpanel" aria-labelledby="StatusLogs">
                                    <!-- -----------------------------Status Logs Tab header start ---------------------------->
                                    <div class="slds-page-header" role="banner">
                                        <div class="slds-media">
                                            <div class="slds-media__figure">
                                                <svg aria-hidden="true" class="slds-icon slds-icon-standard-opportunity">
                                                    <use xlink:href="{!URLFOR($Resource.Breadwinner_QBO, 'Breadwinner_QBO/SLDS/assets/icons/standard-sprite/svg/symbols.svg#custom')}"></use>
                                                </svg>
                                            </div>
                                            <div class="slds-media__body">
                                                <p class="slds-page-header__title slds-truncate" title="Status Logs">Status Logs</p>
                                                <p class="slds-text-body--small">Breadwinner • QuickBooks Online </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- -----------------------------Status Logs Tab header END ---------------------------->
                                    <div class="slds-m-top--medium slds-m-horizontal--small">
                                        <div >
                                            The Status Log shows error messages and exceptions. To check Logs please click on below <b>Check Log for Recent Errors</b> button.
                                        </div>
                                        <apex:commandButton value="Check Log for Recent Errors" styleClass="slds-m-top--medium slds-button slds-button--brand" id="Logbutton" onclick="drawTable();" reRender="ff"/>
                                        <div id="StatusLogSpinner" style="display:none;">
                                            <div class="slds-spinner_container">
                                                <div class="slds-spinner--brand slds-spinner slds-spinner--medium" role="alert">
                                                    <span class="slds-assistive-text">Loading</span>
                                                    <div class="slds-spinner__dot-a"></div>
                                                    <div class="slds-spinner__dot-b"></div>
                                                </div>
                                            </div>
                                        </div>                                        
                                        
                                        <div  class="slds-m-top--medium" id="table_div"></div>
                                        <div id="message" class="slds-m-top--medium" ></div>
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>

                    <apex:actionFunction name="checkSetupTabStepsCompletedFunc" action="{!initializeApp}" id="checkSetupTabStepsCompletedId"   reRender=""></apex:actionFunction>                
                    <apex:actionFunction name="checkIfLayoutIsUpdated" action="{!checkIfPagelayoutsAreUpdated}" status="assign-action-status"  reRender="progressPanel,infoPanel,pagelayoutCheck,professionalUpdate,pageLayoutUpdatePanel,pageLayoutHeadingPanel"></apex:actionFunction>  
                    <apex:actionFunction action="{!checkIfPagelayoutsAreUpdated}"  name="checkIfLayoutIsUpdated1" reRender="pageLayoutHeadingPanel,pagelayoutCheck,progressPanel,professionalUpdate" />
                    <apex:actionFunction name="deleteAPPC" action="{!deleteAppConfig}" status="assing-action-status"/>
                </div>
            </body>
        </html>
        
    </apex:form>
    <apex:outputPanel id="RestartHistoricalSyncScriptPanel">
        <script>
        function onCompletionOfRestartHistoricalSync(){
            if({!isRestartHistoricalSyncSuccessful} == true)
                alert('Historical Sync was successfully restarted');
            else
                alert('There was some Error');                
        }
        </script>
    </apex:outputPanel>
    
    <script>
    function onTabEnterPushToInteractionLog(tabName){
        Visualforce.remoting.Manager.invokeAction('{!$RemoteAction.BreadwinnerController.pushInteractionLogOnTabEnter}', 
                                                  tabName, 
                                                  function(result, event){
                                                      if (event.status){}else if (event.type === 'exception'){}else{}
                                                  },{escape: true}
                                                 );    
    }                
    </script>
    
    <script type="text/javascript">
    function createRemoteSiteMetadata(){
        try{
            var binding = new XMLHttpRequest();
            var host = "{!LEFT($Api.Enterprise_Server_URL_330, FIND('/services',$Api.Enterprise_Server_URL_330))}";
            var request = 
                '<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><env:Header><SessionHeader xmlns="http://soap.sforce.com/2006/04/metadata"><sessionId>{!$Api.Session_ID}</sessionId></SessionHeader></env:Header><env:Body><upsertMetadata xmlns="http://soap.sforce.com/2006/04/metadata"><metadata xsi:type="RemoteSiteSetting"><fullName>Breadwinner_QBO_MyServer</fullName><description>Required to use Metadata API, created by Breadwinner</description><disableProtocolSecurity>false</disableProtocolSecurity><isActive>true</isActive><url>'+host+'</url></metadata></upsertMetadata></env:Body></env:Envelope>';
            
            binding.open('POST', host+'services/Soap/m/33.0');
            binding.setRequestHeader('SOAPAction','""');
            binding.setRequestHeader('Content-Type', 'text/xml');
            binding.onreadystatechange =
                function() {
                if(this.readyState==4) {
                    var parser = new DOMParser();
                    var doc  = parser.parseFromString(this.response, 'application/xml');
                    var errors = doc.getElementsByTagName('errors');
                    console.log(errors);
                }
            }
            if({!isAdministrator}) binding.send(request);
        }
        catch(error){
            console.log(error);
        }

    }
    </script>
    <apex:outputPanel id="chartPanel">
        <script type="text/javascript">
        
        google.load("visualization", "1", {packages:["table"]});
        
        function drawTable() {
            
            document.getElementById("StatusLogSpinner").style.display = "" ;
            
            Visualforce.remoting.Manager.invokeAction(
                '{!$RemoteAction.BreadwinnerController.gettableChartData}', 
                function(result, event){
                    if (event.status) {
                        if(result.length > 0){
                            
                            var dataAsArray = new Array();
                            var columnArray = ["Log Id", "Event Type", "Event Detail", "Additional Detail", "Time"];
                            dataAsArray.push(columnArray);
                            
                            for (var i=0; i<result.length; i++) {
                                var obj =result[i];
                                var rowArray = [obj.log_id, obj.event_type, obj.event_detail, decodeHtml(obj.additional_detail), obj.timestamp];
                                dataAsArray.push(rowArray);
                            }
                            
                            var data = google.visualization.arrayToDataTable(dataAsArray);
                            
                            
                            var table = new google.visualization.Table(document.getElementById('table_div'));
                            
                            table.draw(data, {showRowNumber: false});
                            humanTranslation();
                            document.getElementById("StatusLogSpinner").style.display = "none" ;
                            
                        }
                        else{
                            document.getElementById("message").innerHTML = "Your logs show no recent errors or exceptions.";
                            document.getElementById("table_div").style.display = "none" ;
                            document.getElementById("StatusLogSpinner").style.display = "none" ;

                        }
                        
                    }
                }
            );
        }
        </script>
        <script>
        function decodeHtml(htmlstr) { 
            var txt = document.createElement("textarea"); 
            txt.innerHTML = htmlstr;
            var decodedURIComp = decodeURIComponent(txt.value);
            var repalceAmpersend=decodedURIComp.replace(/&amp;/g, '&');
            var repalceQuotes=repalceAmpersend.replace(/&quot/g, '"');
           	var repalceNewLines=repalceQuotes.replace(/&nl/g, ' ');
            return repalceNewLines;
        }
        function humanTranslation(){
            
            j$( "table.google-visualization-table-table td.google-visualization-table-td:nth-child(4):contains(REQUIRED_FIELD_MISSING)" ).each(function( index ) {
                
                var geteachTD=j$( this );
                
                var windowparentlocation=String(window.location);
                var getindex=windowparentlocation.search("sfdcIFrameOrigin=");
                var resultedAccountFieldsURL='';
                if(parseInt(getindex)>-1){
                    resultedAccountFieldsURL='/one/one.app?source=aloha#/setup/object/Account/all/FieldsAndRelationships';
                }
                else{
                    resultedAccountFieldsURL='/p/setup/layout/LayoutFieldList?type=Account&setupid=AccountFields';
                }
                // check oppty or account
                // get record id
                // create link and modify text with Human trasalation text
                // append
                var gettdtext=geteachTD.text();
                if(gettdtext.match(/001/g)){
                    var AccountCount = gettdtext.match(/001/g).length;
                    console.log("---------Account Count--------"+gettdtext.match(/001/g).length);
                    var textPart1 = "<b>Human Translation:</b> One or more of your fields are required on the Account. But, on this <b>";
                    var i;
                    for(i =1; i<=AccountCount;i++){
                        textPart1 += ' ';
                        var recordId=gettdtext.substring(gettdtext.search("001"),gettdtext.search("001")+18);
                        var opptyORAccountLink = "<a href=\'{!$Site.BaseUrl}/"+recordId+"\' target='_blank'>Account</a>";
                        if(AccountCount > 1)
                            opptyORAccountLink = "<a href=\'{!$Site.BaseUrl}/"+recordId+"\' target='_blank'>Account"+i+"</a>";
                        textPart1 += opptyORAccountLink;
                        gettdtext = gettdtext.replace(recordId, "Account"+i);
                    }
                    var AcctErr = geteachTD.text().split("id 001");
                    console.log('------AcctErr[1]--------'+AcctErr);
                    console.log('------AcctErr[1]--------'+AcctErr[1]);
                    var fields = AcctErr[1].match(/\[.*?\]/);
                    console.log("------------fields--------------"+fields)
                    var textPart = textPart1+'</b> those fields are blank. Please populate <b>'+fields+'</b>. Other Accounts may have the same problem, but this was the Account that caused the error.';  
                    geteachTD.append('<div><p><i>'+textPart+'</i></p></div>');
                }
                if(gettdtext.match(/006/g)){
                    var OptyCount = gettdtext.match(/006/g).length;
                    var translatedText = "<b>Human Translation:</b> One or more of your fields are required on the Opportunity. But, on this<b>"; 
                    if(geteachTD.text().match(/001/g))
                        translatedText = 'One or more of your fields are required on the Opportunity. But, on this<b>';                            
                    var i;
                    for(i =1; i<=OptyCount;i++){
                        translatedText +=' ';
                        var recordId=gettdtext.substring(gettdtext.search("006"),gettdtext.search("006")+18);
                        var opptyORAccountLink = "<a href=\'{!$Site.BaseUrl}/"+recordId+"\' target='_blank'>Opportunity</a>";
                        if(OptyCount > 1)
                            opptyORAccountLink = "<a href=\'{!$Site.BaseUrl}/"+recordId+"\' target='_blank'>Opportunity"+i+"</a>";
                        translatedText += opptyORAccountLink;
                        gettdtext = gettdtext.replace(recordId, "Opportunity"+i);
                    }
                    var OptyErr = geteachTD.text().split("id 006");
                    var fields=OptyErr[1].match(/\[.*?\]/);
                    var OptytranslatedText = translatedText+'</b> those fields are blank. Please populate <b>'+fields+'</b>. Other Opportunities may have the same problem, but this was the Account that caused the error.';  
                    geteachTD.append('<div><p><i>'+OptytranslatedText+'</i></p></div>');
                }
                if(gettdtext.match(/Exceptions while doing manual account sync:REQUIRED_FIELD_MISSING/g)){
                    var AccountFieldsURL = "<a href=\'{!$Site.BaseUrl}"+resultedAccountFieldsURL+"\' target='_blank'>Account Fields</a>";
                    var AcctErr = geteachTD.text();
                    var fields = AcctErr.match(/\[.*?\]/);
                    var AccountInsertText = '<b>Human Translation:</b> One or more of your fields are required on the Account, please remove the validations on fields <b>'+fields+'</b> by visiting <b>'+AccountFieldsURL+'</b> here.';  
                    geteachTD.append('<div><p><i>'+AccountInsertText+'</i></p></div>');
                }
            });
        }
        
        function Check_PageLayoutscheckbox(cb){      
            document.getElementById('profLayoutcheckbox').checked = cb.checked;
            console.log('profcheckbox::'+document.getElementById('profLayoutcheckbox').checked);
            update_Page_Layouts_Updated_Checkbox_fun(cb.checked);        
        }
        
        </script>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!allowDisconnecting}">
        <script type="text/javascript">
        j$(function(){
            if(confirm("It looks like you have disconnected Breadwinner from your QuickBooks Online.\n\nPlease note that disconnecting will not delete any data in Salesforce. All imported Invoices, Accounts, or Breadwinner Account Connection records will remain in Salesforce.\n\nPlease confirm to delete Breadwinner settings of your QuickBooks Online Account")){
                deleteAPPC();
            }
        });
        </script>
    </apex:outputPanel>    
</apex:page>